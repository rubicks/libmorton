/* github.com/rubicks/libmorton/test/binlit.c */

#include <assert.h>
#include <stdio.h>
#include <stdlib.h>

#include "binlit.h"

#define SPIT(EXPR)                    \
  do {                                \
    printf(#EXPR " == %u\n", (EXPR)); \
  } while (0) /**/

#define ASSERT_EQ(LEXP, REXP) \
  do {                        \
    SPIT(LEXP);               \
    SPIT(REXP);               \
    assert((LEXP) == (REXP)); \
  } while (0) /**/

int
main(int argc, char** argv)
{
  (void)argc;
  (void)argv;

  assert(B8(0) == 0);
  assert(B8(1) == 1);
  assert(B8(10) == 2);
  assert(B8(100) == 4);
  assert(B8(1000) == 8);
  assert(B8(10000) == 16);
  assert(B8(100000) == 32);
  assert(B8(1000000) == 64);
  assert(B8(10000000) == 128);

  assert(B8(00000000) == 0);
  assert(B8(00000001) == 1);
  assert(B8(00000010) == 2);
  assert(B8(00000100) == 4);
  assert(B8(00001000) == 8);
  assert(B8(00010000) == 16);
  assert(B8(00100000) == 32);
  assert(B8(01000000) == 64);
  assert(B8(10000000) == 128);

  assert(B8(00000001) == 1);
  assert(B8(00000011) == 3);
  assert(B8(00000111) == 7);
  assert(B8(00001111) == 15);
  assert(B8(00011111) == 31);
  assert(B8(00111111) == 63);
  assert(B8(01111111) == 127);
  assert(B8(11111111) == 255);

  assert(B8(11111111) == UINT8_MAX);

  assert(B16(00000001, 11111111) == 511);
  assert(B16(00000011, 11111111) == 1023);
  assert(B16(00000111, 11111111) == 2047);
  assert(B16(00001111, 11111111) == 4095);
  assert(B16(00011111, 11111111) == 8191);
  assert(B16(00111111, 11111111) == 16383);
  assert(B16(01111111, 11111111) == 32767);
  assert(B16(11111111, 11111111) == 65535);

  assert(B16(11111111, 11111111) == UINT16_MAX);

  assert(B32(0, 00000001, 11111111, 11111111) == 131071);
  assert(B32(0, 00000011, 11111111, 11111111) == 262143);
  assert(B32(0, 00000111, 11111111, 11111111) == 524287);
  assert(B32(0, 00001111, 11111111, 11111111) == 1048575);
  assert(B32(0, 00011111, 11111111, 11111111) == 2097151);
  assert(B32(0, 00111111, 11111111, 11111111) == 4194303);
  assert(B32(0, 01111111, 11111111, 11111111) == 8388607);
  assert(B32(0, 11111111, 11111111, 11111111) == 16777215);

  SPIT(B32(0, 00000001, 11111111, 11111111));
  SPIT(B32(0, 00000011, 11111111, 11111111));
  SPIT(B32(0, 00000111, 11111111, 11111111));
  SPIT(B32(0, 00001111, 11111111, 11111111));
  SPIT(B32(0, 00011111, 11111111, 11111111));
  SPIT(B32(0, 00111111, 11111111, 11111111));
  SPIT(B32(0, 01111111, 11111111, 11111111));
  SPIT(B32(0, 11111111, 11111111, 11111111));

  SPIT(B32(00000001, 11111111, 11111111, 11111111));
  SPIT(B32(00000011, 11111111, 11111111, 11111111));
  SPIT(B32(00000111, 11111111, 11111111, 11111111));
  SPIT(B32(00001111, 11111111, 11111111, 11111111));
  SPIT(B32(00011111, 11111111, 11111111, 11111111));
  SPIT(B32(00111111, 11111111, 11111111, 11111111));
  SPIT(B32(01111111, 11111111, 11111111, 11111111));
  SPIT(B32(11111111, 11111111, 11111111, 11111111));

  assert(B32(00000001, 11111111, 11111111, 11111111) == 33554431);
  assert(B32(00000011, 11111111, 11111111, 11111111) == 67108863);
  assert(B32(00000111, 11111111, 11111111, 11111111) == 134217727);
  assert(B32(00001111, 11111111, 11111111, 11111111) == 268435455);
  assert(B32(00011111, 11111111, 11111111, 11111111) == 536870911);
  assert(B32(00111111, 11111111, 11111111, 11111111) == 1073741823);
  assert(B32(01111111, 11111111, 11111111, 11111111) == 2147483647);
  assert(B32(11111111, 11111111, 11111111, 11111111) == 4294967295);

  assert(B32(11111111, 11111111, 11111111, 11111111) == UINT32_MAX);

  return EXIT_SUCCESS;
}
